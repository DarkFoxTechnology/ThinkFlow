var mn=Object.defineProperty;var yn=(s,e,t)=>e in s?mn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var m=(s,e,t)=>(yn(s,typeof e!="symbol"?e+"":e,t),t),bn=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var ke=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)};var re=(s,e,t)=>(bn(s,e,"access private method"),t);import{E as Pe,t as wn,a as kn,e as _t}from"./vendor-sync-2cX7v0cO.js";let ie;const xn=new Uint8Array(16);function _n(){if(!ie&&(ie=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ie))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ie(xn)}const b=[];for(let s=0;s<256;++s)b.push((s+256).toString(16).slice(1));function Tn(s,e=0){return b[s[e+0]]+b[s[e+1]]+b[s[e+2]]+b[s[e+3]]+"-"+b[s[e+4]]+b[s[e+5]]+"-"+b[s[e+6]]+b[s[e+7]]+"-"+b[s[e+8]]+b[s[e+9]]+"-"+b[s[e+10]]+b[s[e+11]]+b[s[e+12]]+b[s[e+13]]+b[s[e+14]]+b[s[e+15]]}const vn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),st={randomUUID:vn};function ui(s,e,t){if(st.randomUUID&&!s)return st.randomUUID();s=s||{};const n=s.random||(s.rng||_n)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Tn(n)}const B=Object.create(null);B.open="0";B.close="1";B.ping="2";B.pong="3";B.message="4";B.upgrade="5";B.noop="6";const he=Object.create(null);Object.keys(B).forEach(s=>{he[B[s]]=s});const Re={type:"error",data:"parser error"},Tt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vt=typeof ArrayBuffer=="function",Rt=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,De=({type:s,data:e},t,n)=>Tt&&e instanceof Blob?t?n(e):rt(e,n):vt&&(e instanceof ArrayBuffer||Rt(e))?t?n(e):rt(new Blob([e]),n):n(B[s]+(e||"")),rt=(s,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(s)};function it(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let xe;function Rn(s,e){if(Tt&&s.data instanceof Blob)return s.data.arrayBuffer().then(it).then(e);if(vt&&(s.data instanceof ArrayBuffer||Rt(s.data)))return e(it(s.data));De(s,!1,t=>{xe||(xe=new TextEncoder),e(xe.encode(t))})}const ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<ot.length;s++)H[ot.charCodeAt(s)]=s;const Sn=s=>{let e=s.length*.75,t=s.length,n,r=0,i,o,a,l;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const h=new ArrayBuffer(e),c=new Uint8Array(h);for(n=0;n<t;n+=4)i=H[s.charCodeAt(n)],o=H[s.charCodeAt(n+1)],a=H[s.charCodeAt(n+2)],l=H[s.charCodeAt(n+3)],c[r++]=i<<2|o>>4,c[r++]=(o&15)<<4|a>>2,c[r++]=(a&3)<<6|l&63;return h},En=typeof ArrayBuffer=="function",qe=(s,e)=>{if(typeof s!="string")return{type:"message",data:St(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:An(s.substring(1),e)}:he[t]?s.length>1?{type:he[t],data:s.substring(1)}:{type:he[t]}:Re},An=(s,e)=>{if(En){const t=Sn(s);return St(t,e)}else return{base64:!0,data:s}},St=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Et="",Bn=(s,e)=>{const t=s.length,n=new Array(t);let r=0;s.forEach((i,o)=>{De(i,!1,a=>{n[o]=a,++r===t&&e(n.join(Et))})})},Un=(s,e)=>{const t=s.split(Et),n=[];for(let r=0;r<t.length;r++){const i=qe(t[r],e);if(n.push(i),i.type==="error")break}return n};function $n(){return new TransformStream({transform(s,e){Rn(s,t=>{const n=t.length;let r;if(n<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,n);else if(n<65536){r=new Uint8Array(3);const i=new DataView(r.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{r=new Uint8Array(9);const i=new DataView(r.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(r[0]|=128),e.enqueue(r),e.enqueue(t)})}})}let _e;function oe(s){return s.reduce((e,t)=>e+t.length,0)}function ae(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let n=0;for(let r=0;r<e;r++)t[r]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),t}function In(s,e){_e||(_e=new TextDecoder);const t=[];let n=0,r=-1,i=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(n===0){if(oe(t)<1)break;const l=ae(t,1);i=(l[0]&128)===128,r=l[0]&127,r<126?n=3:r===126?n=1:n=2}else if(n===1){if(oe(t)<2)break;const l=ae(t,2);r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(oe(t)<8)break;const l=ae(t,8),h=new DataView(l.buffer,l.byteOffset,l.length),c=h.getUint32(0);if(c>Math.pow(2,21)-1){a.enqueue(Re);break}r=c*Math.pow(2,32)+h.getUint32(4),n=3}else{if(oe(t)<r)break;const l=ae(t,r);a.enqueue(qe(i?l:_e.decode(l),e)),n=0}if(r===0||r>s){a.enqueue(Re);break}}}})}const At=4,Fe=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),x=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Cn="arraybuffer";function Bt(s,...e){return e.reduce((t,n)=>(s.hasOwnProperty(n)&&(t[n]=s[n]),t),{})}const Ln=x.setTimeout,On=x.clearTimeout;function Me(s,e){e.useNativeTimers?(s.setTimeoutFn=Ln.bind(x),s.clearTimeoutFn=On.bind(x)):(s.setTimeoutFn=x.setTimeout.bind(x),s.clearTimeoutFn=x.clearTimeout.bind(x))}const zn=1.33;function Pn(s){return typeof s=="string"?Dn(s):Math.ceil((s.byteLength||s.size)*zn)}function Dn(s){let e=0,t=0;for(let n=0,r=s.length;n<r;n++)e=s.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function Ut(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function qn(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function Fn(s){let e={},t=s.split("&");for(let n=0,r=t.length;n<r;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class Mn extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Ne extends Pe{constructor(e){super(),this.writable=!1,Me(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Mn(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=qe(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=qn(e);return t.length?"?"+t:""}}class Nn extends Ne{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Un(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Bn(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Ut()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let $t=!1;try{$t=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const jn=$t;function Vn(){}class Hn extends Nn{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(r,i)=>{this.onError("xhr post error",r,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class A extends Pe{constructor(e,t,n){super(),this.createRequest=e,Me(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Bt(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this._opts.extraHeaders[r])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this._opts.cookieJar)===null||r===void 0||r.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(r){this.setTimeoutFn(()=>{this._onError(r)},0);return}typeof document<"u"&&(this._index=A.requestsCount++,A.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Vn,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete A.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}A.requestsCount=0;A.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",at);else if(typeof addEventListener=="function"){const s="onpagehide"in x?"pagehide":"unload";addEventListener(s,at,!1)}}function at(){for(let s in A.requests)A.requests.hasOwnProperty(s)&&A.requests[s].abort()}const Zn=function(){const s=It({xdomain:!1});return s&&s.responseType!==null}();class Wn extends Hn{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Zn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new A(It,this.uri(),e)}}function It(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||jn))return new XMLHttpRequest}catch{}if(!e)try{return new x[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ct=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Xn extends Ne{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Ct?{}:Bt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;De(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}r&&Fe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ut()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Te=x.WebSocket||x.MozWebSocket;class Qn extends Xn{createSocket(e,t,n){return Ct?new Te(e,t,n):t?new Te(e,t):new Te(e)}doWrite(e,t){this.ws.send(t)}}class Kn extends Ne{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=In(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=$n();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&Fe(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Gn={websocket:Qn,webtransport:Kn,polling:Wn},Jn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Yn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lt(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),n=s.indexOf("]");t!=-1&&n!=-1&&(s=s.substring(0,t)+s.substring(t,n).replace(/:/g,";")+s.substring(n,s.length));let r=Jn.exec(s||""),i={},o=14;for(;o--;)i[Yn[o]]=r[o]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=es(i,i.path),i.queryKey=ts(i,i.query),i}function es(s,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function ts(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,r,i){r&&(t[r]=i)}),t}const Se=typeof addEventListener=="function"&&typeof removeEventListener=="function",ue=[];Se&&addEventListener("offline",()=>{ue.forEach(s=>s())},!1);class C extends Pe{constructor(e,t){if(super(),this.binaryType=Cn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=lt(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=lt(t.host).host);Me(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const r=n.prototype.name;this.transports.push(r),this._transportsByName[r]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Fn(this.opts.query)),Se&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ue.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=At,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&C.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",C.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(t+=Pn(r)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Fe(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if(typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(C.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Se&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=ue.indexOf(this._offlineEventListener);n!==-1&&ue.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}C.protocol=At;class ns extends C{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;C.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;C.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const u=new Error("probe error");u.transport=t.name,this.emitReserved("upgradeError",u)}}))};function i(){n||(n=!0,c(),t.close(),t=null)}const o=p=>{const u=new Error("probe error: "+p);u.transport=t.name,i(),this.emitReserved("upgradeError",u)};function a(){o("transport closed")}function l(){o("socket closed")}function h(p){t&&p.name!==t.name&&i()}const c=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",a),this.off("close",l),this.off("upgrading",h)};t.once("open",r),t.once("error",o),t.once("close",a),this.once("close",l),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class pi extends ns{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(r=>Gn[r]).filter(r=>!!r)),super(e,n)}}const T=()=>new Map,fi=s=>{const e=T();return s.forEach((t,n)=>{e.set(n,t)}),e},Lt=(s,e,t)=>{let n=s.get(e);return n===void 0&&s.set(e,n=t()),n},ss=(s,e)=>{const t=[];for(const[n,r]of s)t.push(e(r,n));return t},di=(s,e)=>{for(const[t,n]of s)if(e(n,t))return!0;return!1},je=()=>new Set,gi=s=>s[s.length-1],mi=(s,e)=>{for(let t=0;t<e.length;t++)s.push(e[t])},Ot=Array.from,yi=(s,e)=>{for(let t=0;t<s.length;t++)if(e(s[t],t,s))return!0;return!1},rs=Array.isArray;class bi{constructor(){this._observers=T()}on(e,t){return Lt(this._observers,e,je).add(t),t}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return Ot((this._observers.get(e)||T()).values()).forEach(n=>n(...t))}destroy(){this._observers=T()}}class is{constructor(){this._observers=T()}on(e,t){Lt(this._observers,e,je).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return Ot((this._observers.get(e)||T()).values()).forEach(n=>n(...t))}destroy(){this._observers=T()}}const K=Math.floor,os=Math.abs,as=(s,e)=>s<e?s:e,zt=(s,e)=>s>e?s:e,Pt=s=>s!==0?s<0:1/s<0,wi=1,ki=2,xi=4,_i=8,Ti=32,Dt=64,N=128,vi=31,Ee=63,O=127,ls=2147483647,qt=Number.MAX_SAFE_INTEGER,cs=Number.isInteger||(s=>typeof s=="number"&&isFinite(s)&&K(s)===s),hs=s=>s.toLowerCase(),us=/^\s*/g,ps=s=>s.replace(us,""),fs=/([A-Z])/g,ct=(s,e)=>ps(s.replace(fs,t=>`${e}${hs(t)}`)),ds=s=>{const e=unescape(encodeURIComponent(s)),t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.codePointAt(r);return n},G=typeof TextEncoder<"u"?new TextEncoder:null,gs=s=>G.encode(s),ms=G?gs:ds;let W=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});W&&W.decode(new Uint8Array).length===1&&(W=null);class ee{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ri=()=>new ee,ys=s=>{let e=s.cpos;for(let t=0;t<s.bufs.length;t++)e+=s.bufs[t].length;return e},Ve=s=>{const e=new Uint8Array(ys(s));let t=0;for(let n=0;n<s.bufs.length;n++){const r=s.bufs[n];e.set(r,t),t+=r.length}return e.set(new Uint8Array(s.cbuf.buffer,0,s.cpos),t),e},bs=(s,e)=>{const t=s.cbuf.length;t-s.cpos<e&&(s.bufs.push(new Uint8Array(s.cbuf.buffer,0,s.cpos)),s.cbuf=new Uint8Array(zt(t,e)*2),s.cpos=0)},y=(s,e)=>{const t=s.cbuf.length;s.cpos===t&&(s.bufs.push(s.cbuf),s.cbuf=new Uint8Array(t*2),s.cpos=0),s.cbuf[s.cpos++]=e},Si=y,L=(s,e)=>{for(;e>O;)y(s,N|O&e),e=K(e/128);y(s,O&e)},He=(s,e)=>{const t=Pt(e);for(t&&(e=-e),y(s,(e>Ee?N:0)|(t?Dt:0)|Ee&e),e=K(e/64);e>0;)y(s,(e>O?N:0)|O&e),e=K(e/128)},Ae=new Uint8Array(3e4),ws=Ae.length/3,ks=(s,e)=>{if(e.length<ws){const t=G.encodeInto(e,Ae).written||0;L(s,t);for(let n=0;n<t;n++)y(s,Ae[n])}else Mt(s,ms(e))},xs=(s,e)=>{const t=unescape(encodeURIComponent(e)),n=t.length;L(s,n);for(let r=0;r<n;r++)y(s,t.codePointAt(r))},Be=G&&G.encodeInto?ks:xs,Ft=(s,e)=>{const t=s.cbuf.length,n=s.cpos,r=as(t-n,e.length),i=e.length-r;s.cbuf.set(e.subarray(0,r),n),s.cpos+=r,i>0&&(s.bufs.push(s.cbuf),s.cbuf=new Uint8Array(zt(t*2,i)),s.cbuf.set(e.subarray(r)),s.cpos=i)},Mt=(s,e)=>{L(s,e.byteLength),Ft(s,e)},Ze=(s,e)=>{bs(s,e);const t=new DataView(s.cbuf.buffer,s.cpos,e);return s.cpos+=e,t},_s=(s,e)=>Ze(s,4).setFloat32(0,e,!1),Ts=(s,e)=>Ze(s,8).setFloat64(0,e,!1),vs=(s,e)=>Ze(s,8).setBigInt64(0,e,!1),ht=new DataView(new ArrayBuffer(4)),Rs=s=>(ht.setFloat32(0,s),ht.getFloat32(0)===s),ut=(s,e)=>{switch(typeof e){case"string":y(s,119),Be(s,e);break;case"number":cs(e)&&os(e)<=ls?(y(s,125),He(s,e)):Rs(e)?(y(s,124),_s(s,e)):(y(s,123),Ts(s,e));break;case"bigint":y(s,122),vs(s,e);break;case"object":if(e===null)y(s,126);else if(rs(e)){y(s,117),L(s,e.length);for(let t=0;t<e.length;t++)ut(s,e[t])}else if(e instanceof Uint8Array)y(s,116),Mt(s,e);else{y(s,118);const t=Object.keys(e);L(s,t.length);for(let n=0;n<t.length;n++){const r=t[n];Be(s,r),ut(s,e[r])}}break;case"boolean":y(s,e?120:121);break;default:y(s,127)}};class Ei extends ee{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&L(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const pt=s=>{s.count>0&&(He(s.encoder,s.count===1?s.s:-s.s),s.count>1&&L(s.encoder,s.count-2))};class Ss{constructor(){this.encoder=new ee,this.s=0,this.count=0}write(e){this.s===e?this.count++:(pt(this),this.count=1,this.s=e)}toUint8Array(){return pt(this),Ve(this.encoder)}}const ft=s=>{if(s.count>0){const e=s.diff*2+(s.count===1?0:1);He(s.encoder,e),s.count>1&&L(s.encoder,s.count-2)}};class Ai{constructor(){this.encoder=new ee,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(ft(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return ft(this),Ve(this.encoder)}}class Bi{constructor(){this.sarr=[],this.s="",this.lensE=new Ss}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new ee;return this.sarr.push(this.s),this.s="",Be(e,this.sarr.join("")),Ft(e,this.lensE.toUint8Array()),Ve(e)}}const te=s=>new Error(s),Ui=()=>{throw te("Method unimplemented")},$i=()=>{throw te("Unexpected case")},Nt=te("Unexpected end of array"),jt=te("Integer out of Range");class me{constructor(e){this.arr=e,this.pos=0}}const Ii=s=>new me(s),Es=s=>s.pos!==s.arr.length,As=(s,e)=>{const t=new Uint8Array(s.arr.buffer,s.pos+s.arr.byteOffset,e);return s.pos+=e,t},Vt=s=>As(s,z(s)),Ue=s=>s.arr[s.pos++],z=s=>{let e=0,t=1;const n=s.arr.length;for(;s.pos<n;){const r=s.arr[s.pos++];if(e=e+(r&O)*t,t*=128,r<N)return e;if(e>qt)throw jt}throw Nt},We=s=>{let e=s.arr[s.pos++],t=e&Ee,n=64;const r=(e&Dt)>0?-1:1;if(!(e&N))return r*t;const i=s.arr.length;for(;s.pos<i;){if(e=s.arr[s.pos++],t=t+(e&O)*n,n*=128,e<N)return r*t;if(t>qt)throw jt}throw Nt},Bs=s=>{let e=z(s);if(e===0)return"";{let t=String.fromCodePoint(Ue(s));if(--e<100)for(;e--;)t+=String.fromCodePoint(Ue(s));else for(;e>0;){const n=e<1e4?e:1e4,r=s.arr.subarray(s.pos,s.pos+n);s.pos+=n,t+=String.fromCodePoint.apply(null,r),e-=n}return decodeURIComponent(escape(t))}},Us=s=>W.decode(Vt(s)),$e=W?Us:Bs,Xe=(s,e)=>{const t=new DataView(s.arr.buffer,s.arr.byteOffset+s.pos,e);return s.pos+=e,t},$s=s=>Xe(s,4).getFloat32(0,!1),Is=s=>Xe(s,8).getFloat64(0,!1),Cs=s=>Xe(s,8).getBigInt64(0,!1),Ls=[s=>{},s=>null,We,$s,Is,Cs,s=>!1,s=>!0,$e,s=>{const e=z(s),t={};for(let n=0;n<e;n++){const r=$e(s);t[r]=dt(s)}return t},s=>{const e=z(s),t=[];for(let n=0;n<e;n++)t.push(dt(s));return t},Vt],dt=s=>Ls[127-Ue(s)](s);class Ci extends me{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Es(this)?this.count=z(this)+1:this.count=-1),this.count--,this.s}}class Os extends me{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=We(this);const e=Pt(this.s);this.count=1,e&&(this.s=-this.s,this.count=z(this)+2)}return this.count--,this.s}}class Li extends me{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=We(this),t=e&1;this.diff=K(e/2),this.count=1,t&&(this.count=z(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Oi{constructor(e){this.decoder=new Os(e),this.str=$e(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}const zs=crypto.getRandomValues.bind(crypto),Ps=()=>zs(new Uint32Array(1))[0],Ds="10000000-1000-4000-8000"+-1e11,zi=()=>Ds.replace(/[018]/g,s=>(s^Ps()&15>>s/4).toString(16)),Pi=Date.now,ye=s=>new Promise(s);Promise.all.bind(Promise);const gt=s=>s===void 0?null:s;class qs{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let Ht=new qs,Fs=!0;try{typeof localStorage<"u"&&localStorage&&(Ht=localStorage,Fs=!1)}catch{}const Ms=Ht,Di=Object.assign,Ns=Object.keys,qi=(s,e)=>{for(const t in s)e(s[t],t)},mt=s=>Ns(s).length,Fi=s=>{for(const e in s)return!1;return!0},js=(s,e)=>{for(const t in s)if(!e(s[t],t))return!1;return!0},Vs=(s,e)=>Object.prototype.hasOwnProperty.call(s,e),Mi=(s,e)=>s===e||mt(s)===mt(e)&&js(s,(t,n)=>(t!==void 0||Vs(e,n))&&e[n]===t),Hs=Object.freeze,Zs=s=>{for(const e in s){const t=s[e];(typeof t=="object"||typeof t=="function")&&Zs(s[e])}return Hs(s)},Ws=(s,e,t=0)=>{try{for(;t<s.length;t++)s[t](...e)}finally{t<s.length&&Ws(s,e,t+1)}},Ni=s=>s,Xs=(s,e)=>e.includes(s);var Zt={};const J=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let R;const Qs=()=>{if(R===void 0)if(J){R=T();const s=process.argv;let e=null;for(let t=0;t<s.length;t++){const n=s[t];n[0]==="-"?(e!==null&&R.set(e,""),e=n):e!==null&&(R.set(e,n),e=null)}e!==null&&R.set(e,"")}else typeof location=="object"?(R=T(),(location.search||"?").slice(1).split("&").forEach(s=>{if(s.length!==0){const[e,t]=s.split("=");R.set(`--${ct(e,"-")}`,t),R.set(`-${ct(e,"-")}`,t)}})):R=T();return R},Ie=s=>Qs().has(s),Ce=s=>gt(J?Zt[s.toUpperCase().replaceAll("-","_")]:Ms.getItem(s)),Wt=s=>Ie("--"+s)||Ce(s)!==null;Wt("production");const Ks=J&&Xs(Zt.FORCE_COLOR,["true","1","2"]),Gs=Ks||!Ie("--no-colors")&&!Wt("no-color")&&(!J||process.stdout.isTTY)&&(!J||Ie("--color")||Ce("COLORTERM")!==null||(Ce("TERM")||"").includes("color")),Js=s=>new Uint8Array(s),ji=s=>{const e=Js(s.byteLength);return e.set(s),e};class Ys{constructor(e,t){this.left=e,this.right=t}}const U=(s,e)=>new Ys(s,e);typeof DOMParser<"u"&&new DOMParser;const er=s=>ss(s,(e,t)=>`${t}:${e};`).join(""),$=Symbol,tr=$(),nr=$(),sr=$(),rr=$(),ir=$(),or=$(),ar=$(),Xt=$(),lr=$(),cr=s=>{var r;s.length===1&&((r=s[0])==null?void 0:r.constructor)===Function&&(s=s[0]());const e=[],t=[];let n=0;for(;n<s.length;n++){const i=s[n];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(n>0&&t.push(e.join(""));n<s.length;n++){const i=s[n];i instanceof Symbol||t.push(i)}return t},hr={[tr]:U("font-weight","bold"),[nr]:U("font-weight","normal"),[sr]:U("color","blue"),[ir]:U("color","green"),[rr]:U("color","grey"),[or]:U("color","red"),[ar]:U("color","purple"),[Xt]:U("color","orange"),[lr]:U("color","black")},ur=s=>{var o;s.length===1&&((o=s[0])==null?void 0:o.constructor)===Function&&(s=s[0]());const e=[],t=[],n=T();let r=[],i=0;for(;i<s.length;i++){const a=s[i],l=hr[a];if(l!==void 0)n.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const h=er(n);i>0||h.length>0?(e.push("%c"+a),t.push(h)):e.push(a)}else break}}for(i>0&&(r=t,r.unshift(e.join("")));i<s.length;i++){const a=s[i];a instanceof Symbol||r.push(a)}return r},Qt=Gs?ur:cr,Vi=(...s)=>{console.log(...Qt(s)),Kt.forEach(e=>e.print(s))},Hi=(...s)=>{console.warn(...Qt(s)),s.unshift(Xt),Kt.forEach(e=>e.print(s))},Kt=je(),Gt=s=>({[Symbol.iterator](){return this},next:s}),Zi=(s,e)=>Gt(()=>{let t;do t=s.next();while(!t.done&&!e(t.value));return t}),Wi=(s,e)=>Gt(()=>{const{done:t,value:n}=s.next();return{done:t,value:t?void 0:e(n)}}),D=s=>ye((e,t)=>{s.onerror=n=>t(new Error(n.target.error)),s.onsuccess=n=>e(n.target.result)}),pr=(s,e)=>ye((t,n)=>{const r=indexedDB.open(s);r.onupgradeneeded=i=>e(i.target.result),r.onerror=i=>n(te(i.target.error)),r.onsuccess=i=>{const o=i.target.result;o.onversionchange=()=>{o.close()},t(o)}}),fr=s=>D(indexedDB.deleteDatabase(s)),dr=(s,e)=>e.forEach(t=>s.createObjectStore.apply(s,t)),Z=(s,e,t="readwrite")=>{const n=s.transaction(e,t);return e.map(r=>_r(n,r))},Jt=(s,e)=>D(s.count(e)),gr=(s,e)=>D(s.get(e)),Yt=(s,e)=>D(s.delete(e)),mr=(s,e,t)=>D(s.put(e,t)),Le=(s,e)=>D(s.add(e)),yr=(s,e,t)=>D(s.getAll(e,t)),br=(s,e,t)=>{let n=null;return xr(s,e,r=>(n=r,!1),t).then(()=>n)},wr=(s,e=null)=>br(s,e,"prev"),kr=(s,e)=>ye((t,n)=>{s.onerror=n,s.onsuccess=async r=>{const i=r.target.result;if(i===null||await e(i)===!1)return t();i.continue()}}),xr=(s,e,t,n="next")=>kr(s.openKeyCursor(e,n),r=>t(r.key)),_r=(s,e)=>s.objectStore(e),Tr=(s,e)=>IDBKeyRange.upperBound(s,e),vr=(s,e)=>IDBKeyRange.lowerBound(s,e),ve="custom",en="updates",tn=500,nn=(s,e=()=>{},t=()=>{})=>{const[n]=Z(s.db,[en]);return yr(n,vr(s._dbref,!1)).then(r=>{s._destroyed||(e(n),wn(s.doc,()=>{r.forEach(i=>kn(s.doc,i))},s,!1),t(n))}).then(()=>wr(n).then(r=>{s._dbref=r+1})).then(()=>Jt(n).then(r=>{s._dbsize=r})).then(()=>n)},Rr=(s,e=!0)=>nn(s).then(t=>{(e||s._dbsize>=tn)&&Le(t,_t(s.doc)).then(()=>Yt(t,Tr(s._dbref,!0))).then(()=>Jt(t).then(n=>{s._dbsize=n}))});class Xi extends is{constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=pr(e,n=>dr(n,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=ye(n=>this.on("synced",()=>n(this))),this._db.then(n=>{this.db=n,nn(this,o=>Le(o,_t(t)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(n,r)=>{if(this.db&&r!==this){const[i]=Z(this.db,[en]);Le(i,n),++this._dbsize>=tn&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{Rr(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{fr(this.name)})}get(e){return this._db.then(t=>{const[n]=Z(t,[ve],"readonly");return gr(n,e)})}set(e,t){return this._db.then(n=>{const[r]=Z(n,[ve]);return mr(r,t,e)})}del(e){return this._db.then(t=>{const[n]=Z(t,[ve]);return Yt(n,e)})}}var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sr(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var sn={exports:{}};(function(s,e){(function(t,n){n()})(j,function(){function t(h,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,c,p){var u=new XMLHttpRequest;u.open("GET",h),u.responseType="blob",u.onload=function(){l(u.response,c,p)},u.onerror=function(){console.error("could not download file")},u.send()}function r(h){var c=new XMLHttpRequest;c.open("HEAD",h,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof j=="object"&&j.global===j?j:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(h,c,p){var u=o.URL||o.webkitURL,f=document.createElement("a");c=c||h.name||"download",f.download=c,f.rel="noopener",typeof h=="string"?(f.href=h,f.origin===location.origin?i(f):r(f.href)?n(h,c,p):i(f,f.target="_blank")):(f.href=u.createObjectURL(h),setTimeout(function(){u.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(h,c,p){if(c=c||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,p),c);else if(r(h))n(h,c,p);else{var u=document.createElement("a");u.href=h,u.target="_blank",setTimeout(function(){i(u)})}}:function(h,c,p,u){if(u=u||open("","_blank"),u&&(u.document.title=u.document.body.innerText="downloading..."),typeof h=="string")return n(h,c,p);var f=h.type==="application/octet-stream",v=/constructor/i.test(o.HTMLElement)||o.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||f&&v||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var I=_.result;I=w?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),u?u.location.href=I:location=I,u=null},_.readAsDataURL(h)}else{var F=o.URL||o.webkitURL,M=F.createObjectURL(h);u?u.location=M:location.href=M,u=null,setTimeout(function(){F.revokeObjectURL(M)},4e4)}});o.saveAs=l.saveAs=l,s.exports=l})})(sn);var Er=sn.exports;const Qi=Sr(Er);function Qe(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let q=Qe();function rn(s){q=s}const on=/[&<>"']/,Ar=new RegExp(on.source,"g"),an=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Br=new RegExp(an.source,"g"),Ur={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yt=s=>Ur[s];function k(s,e){if(e){if(on.test(s))return s.replace(Ar,yt)}else if(an.test(s))return s.replace(Br,yt);return s}const $r=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Ir(s){return s.replace($r,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Cr=/(^|[^\[])\^/g;function g(s,e){let t=typeof s=="string"?s:s.source;e=e||"";const n={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Cr,"$1"),t=t.replace(r,o),n},getRegex:()=>new RegExp(t,e)};return n}function bt(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const X={exec:()=>null};function wt(s,e){const t=s.replace(/\|/g,(i,o,a)=>{let l=!1,h=o;for(;--h>=0&&a[h]==="\\";)l=!l;return l?"|":" |"}),n=t.split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function le(s,e,t){const n=s.length;if(n===0)return"";let r=0;for(;r<n&&s.charAt(n-r-1)===e;)r++;return s.slice(0,n-r)}function Lr(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return-1}function kt(s,e,t,n){const r=e.href,i=e.title?k(e.title):null,o=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:r,title:i,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:i,text:k(o)}}function Or(s,e){const t=s.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[o]=i;return o.length>=n.length?r.slice(n.length):r}).join(`
`)}class pe{constructor(e){m(this,"options");m(this,"rules");m(this,"lexer");this.options=e||q}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:le(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],r=Or(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const r=le(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const n=le(t[0].replace(/^ *>[ \t]?/gm,""),`
`),r=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",h=!1;for(;e;){let c=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let p=t[2].split(`
`,1)[0].replace(/^\t+/,F=>" ".repeat(3*F.length)),u=e.split(`
`,1)[0],f=0;this.options.pedantic?(f=2,l=p.trimStart()):(f=t[2].search(/[^ ]/),f=f>4?1:f,l=p.slice(f),f+=t[1].length);let v=!1;if(!p&&/^ *$/.test(u)&&(a+=u+`
`,e=e.substring(u.length+1),c=!0),!c){const F=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),M=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),I=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),nt=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const we=e.split(`
`,1)[0];if(u=we,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),I.test(u)||nt.test(u)||F.test(u)||M.test(e))break;if(u.search(/[^ ]/)>=f||!u.trim())l+=`
`+u.slice(f);else{if(v||p.search(/[^ ]/)>=4||I.test(p)||nt.test(p)||M.test(p))break;l+=`
`+u}!v&&!u.trim()&&(v=!0),a+=we+`
`,e=e.substring(we.length+1),p=u.slice(f)}}i.loose||(h?i.loose=!0:/\n *\n *$/.test(a)&&(h=!0));let w=null,_;this.options.gfm&&(w=/^\[[ xX]\] /.exec(l),w&&(_=w[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:a,task:!!w,checked:_,loose:!1,text:l,tokens:[]}),i.raw+=a}i.items[i.items.length-1].raw=a.trimEnd(),i.items[i.items.length-1].text=l.trimEnd(),i.raw=i.raw.trimEnd();for(let c=0;c<i.items.length;c++)if(this.lexer.state.top=!1,i.items[c].tokens=this.lexer.blockTokens(i.items[c].text,[]),!i.loose){const p=i.items[c].tokens.filter(f=>f.type==="space"),u=p.length>0&&p.some(f=>/\n.*\n/.test(f.raw));i.loose=u}if(i.loose)for(let c=0;c<i.items.length;c++)i.items[c].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:r,title:i}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=wt(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(const a of n)o.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of i)o.rows.push(wt(a,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:k(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const o=le(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{const o=Lr(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),kt(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const r=(n[2]||n[1]).replace(/\s+/g," "),i=t[r.toLowerCase()];if(!i){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return kt(n,i,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const o=[...r[0]].length-1;let a,l,h=o,c=0;const p=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(p.lastIndex=0,t=t.slice(-1*e.length+o);(r=p.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=[...a].length,r[3]||r[4]){h+=l;continue}else if((r[5]||r[6])&&o%3&&!((o+l)%3)){c+=l;continue}if(h-=l,h>0)continue;l=Math.min(l,l+h+c);const u=[...r[0]][0].length,f=e.slice(0,o+r.index+u+l);if(Math.min(o,l)%2){const w=f.slice(1,-1);return{type:"em",raw:f,text:w,tokens:this.lexer.inlineTokens(w)}}const v=f.slice(2,-2);return{type:"strong",raw:f,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const r=/[^ ]/.test(n),i=/^ /.test(n)&&/ $/.test(n);return r&&i&&(n=n.substring(1,n.length-1)),n=k(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,r;return t[2]==="@"?(n=k(t[1]),r="mailto:"+n):(n=k(t[1]),r=n),{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=k(t[0]),i="mailto:"+r;else{let o;do o=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(o!==t[0]);r=k(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return this.lexer.state.inRawBlock?n=t[0]:n=k(t[0]),{type:"text",raw:t[0],text:n}}}}const zr=/^(?: *(?:\n|$))+/,Pr=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Dr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ne=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,qr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ln=/(?:[*+-]|\d{1,9}[.)])/,cn=g(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ln).getRegex(),Ke=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Fr=/^[^\n]+/,Ge=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Mr=g(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ge).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Nr=g(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ln).getRegex(),be="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Je=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,jr=g("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Je).replace("tag",be).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),hn=g(Ke).replace("hr",ne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be).getRegex(),Vr=g(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",hn).getRegex(),Ye={blockquote:Vr,code:Pr,def:Mr,fences:Dr,heading:qr,hr:ne,html:jr,lheading:cn,list:Nr,newline:zr,paragraph:hn,table:X,text:Fr},xt=g("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be).getRegex(),Hr={...Ye,table:xt,paragraph:g(Ke).replace("hr",ne).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",xt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",be).getRegex()},Zr={...Ye,html:g(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Je).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:X,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:g(Ke).replace("hr",ne).replace("heading",` *#{1,6} *[^
]`).replace("lheading",cn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},un=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Wr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,pn=/^( {2,}|\\)\n(?!\s*$)/,Xr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,se="\\p{P}$+<=>`^|~",Qr=g(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,se).getRegex(),Kr=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Gr=g(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,se).getRegex(),Jr=g("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,se).getRegex(),Yr=g("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,se).getRegex(),ei=g(/\\([punct])/,"gu").replace(/punct/g,se).getRegex(),ti=g(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ni=g(Je).replace("(?:-->|$)","-->").getRegex(),si=g("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ni).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),fe=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ri=g(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",fe).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fn=g(/^!?\[(label)\]\[(ref)\]/).replace("label",fe).replace("ref",Ge).getRegex(),dn=g(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ge).getRegex(),ii=g("reflink|nolink(?!\\()","g").replace("reflink",fn).replace("nolink",dn).getRegex(),et={_backpedal:X,anyPunctuation:ei,autolink:ti,blockSkip:Kr,br:pn,code:Wr,del:X,emStrongLDelim:Gr,emStrongRDelimAst:Jr,emStrongRDelimUnd:Yr,escape:un,link:ri,nolink:dn,punctuation:Qr,reflink:fn,reflinkSearch:ii,tag:si,text:Xr,url:X},oi={...et,link:g(/^!?\[(label)\]\((.*?)\)/).replace("label",fe).getRegex(),reflink:g(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",fe).getRegex()},Oe={...et,escape:g(un).replace("])","~|])").getRegex(),url:g(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ai={...Oe,br:g(pn).replace("{2,}","*").getRegex(),text:g(Oe.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ce={normal:Ye,gfm:Hr,pedantic:Zr},V={normal:et,gfm:Oe,breaks:ai,pedantic:oi};class S{constructor(e){m(this,"tokens");m(this,"options");m(this,"state");m(this,"tokenizer");m(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||q,this.options.tokenizer=this.options.tokenizer||new pe,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:ce.normal,inline:V.normal};this.options.pedantic?(t.block=ce.pedantic,t.inline=V.pedantic):this.options.gfm&&(t.block=ce.gfm,this.options.breaks?t.inline=V.breaks:t.inline=V.gfm),this.tokenizer.rules=t}static get rules(){return{block:ce,inline:V}}static lex(e,t){return new S(t).lex(e)}static lexInline(e,t){return new S(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,h)=>l+"    ".repeat(h.length));let n,r,i,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(n=a.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let h;this.options.extensions.startBlock.forEach(c=>{h=c.call({lexer:this},l),typeof h=="number"&&h>=0&&(a=Math.min(a,h))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){r=t[t.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,i,o=e,a,l,h;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(h=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(n=c.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),r=t[t.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,o,h)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(i=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const p=e.slice(1);let u;this.options.extensions.startInline.forEach(f=>{u=f.call({lexer:this},p),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(i=e.substring(0,c+1))}if(n=this.tokenizer.inlineText(i)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(h=n.raw.slice(-1)),l=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}}class de{constructor(e){m(this,"options");this.options=e||q}code(e,t,n){var i;const r=(i=(t||"").match(/^\S*/))==null?void 0:i[0];return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+k(r)+'">'+(n?e:k(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:k(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,n){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,n){const r=t?"ol":"ul",i=t&&n!==1?' start="'+n+'"':"";return"<"+r+i+`>
`+e+"</"+r+`>
`}listitem(e,t,n){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){const r=bt(e);if(r===null)return n;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>",i}image(e,t,n){const r=bt(e);if(r===null)return n;e=r;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return e}}class tt{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class E{constructor(e){m(this,"options");m(this,"renderer");m(this,"textRenderer");this.options=e||q,this.options.renderer=this.options.renderer||new de,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new tt}static parse(e,t){return new E(t).parse(e)}static parseInline(e,t){return new E(t).parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=i,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){n+=a||"";continue}}switch(i.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const o=i;n+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Ir(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=i;n+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=i;let a="",l="";for(let c=0;c<o.header.length;c++)l+=this.renderer.tablecell(this.parseInline(o.header[c].tokens),{header:!0,align:o.align[c]});a+=this.renderer.tablerow(l);let h="";for(let c=0;c<o.rows.length;c++){const p=o.rows[c];l="";for(let u=0;u<p.length;u++)l+=this.renderer.tablecell(this.parseInline(p[u].tokens),{header:!1,align:o.align[u]});h+=this.renderer.tablerow(l)}n+=this.renderer.table(a,h);continue}case"blockquote":{const o=i,a=this.parse(o.tokens);n+=this.renderer.blockquote(a);continue}case"list":{const o=i,a=o.ordered,l=o.start,h=o.loose;let c="";for(let p=0;p<o.items.length;p++){const u=o.items[p],f=u.checked,v=u.task;let w="";if(u.task){const _=this.renderer.checkbox(!!f);h?u.tokens.length>0&&u.tokens[0].type==="paragraph"?(u.tokens[0].text=_+" "+u.tokens[0].text,u.tokens[0].tokens&&u.tokens[0].tokens.length>0&&u.tokens[0].tokens[0].type==="text"&&(u.tokens[0].tokens[0].text=_+" "+u.tokens[0].tokens[0].text)):u.tokens.unshift({type:"text",text:_+" "}):w+=_+" "}w+=this.parse(u.tokens,h),c+=this.renderer.listitem(w,v,!!f)}n+=this.renderer.list(c,a,l);continue}case"html":{const o=i;n+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=i;n+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=i,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&e[r+1].type==="text";)o=e[++r],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);n+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const o=this.options.extensions.renderers[i.type].call({parser:this},i);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=o||"";continue}}switch(i.type){case"escape":{const o=i;n+=t.text(o.text);break}case"html":{const o=i;n+=t.html(o.text);break}case"link":{const o=i;n+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{const o=i;n+=t.image(o.href,o.title,o.text);break}case"strong":{const o=i;n+=t.strong(this.parseInline(o.tokens,t));break}case"em":{const o=i;n+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{const o=i;n+=t.codespan(o.text);break}case"br":{n+=t.br();break}case"del":{const o=i;n+=t.del(this.parseInline(o.tokens,t));break}case"text":{const o=i;n+=t.text(o.text);break}default:{const o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}}class Q{constructor(e){m(this,"options");this.options=e||q}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}m(Q,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Y,ze,ge,gn;class li{constructor(...e){ke(this,Y);ke(this,ge);m(this,"defaults",Qe());m(this,"options",this.setOptions);m(this,"parse",re(this,Y,ze).call(this,S.lex,E.parse));m(this,"parseInline",re(this,Y,ze).call(this,S.lexInline,E.parseInline));m(this,"Parser",E);m(this,"Renderer",de);m(this,"TextRenderer",tt);m(this,"Lexer",S);m(this,"Tokenizer",pe);m(this,"Hooks",Q);this.use(...e)}walkTokens(e,t){var r,i;let n=[];for(const o of e)switch(n=n.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const l of a.header)n=n.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const h of l)n=n.concat(this.walkTokens(h.tokens,t));break}case"list":{const a=o;n=n.concat(this.walkTokens(a.items,t));break}default:{const a=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const h=a[l].flat(1/0);n=n.concat(this.walkTokens(h,t))}):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=t.renderers[i.name];o?t.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),n.renderer){const i=this.defaults.renderer||new de(this.defaults);for(const o in n.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const a=o,l=n.renderer[a],h=i[a];i[a]=(...c)=>{let p=l.apply(i,c);return p===!1&&(p=h.apply(i,c)),p||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new pe(this.defaults);for(const o in n.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=n.tokenizer[a],h=i[a];i[a]=(...c)=>{let p=l.apply(i,c);return p===!1&&(p=h.apply(i,c)),p}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new Q;for(const o in n.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=n.hooks[a],h=i[a];Q.passThroughHooks.has(o)?i[a]=c=>{if(this.defaults.async)return Promise.resolve(l.call(i,c)).then(u=>h.call(i,u));const p=l.call(i,c);return h.call(i,p)}:i[a]=(...c)=>{let p=l.apply(i,c);return p===!1&&(p=h.apply(i,c)),p}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,o=n.walkTokens;r.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),i&&(l=l.concat(i.call(this,a))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return S.lex(e,t??this.defaults)}parser(e,t){return E.parse(e,t??this.defaults)}}Y=new WeakSet,ze=function(e,t){return(n,r)=>{const i={...r},o={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=re(this,ge,gn).call(this,!!o.silent,!!o.async);if(typeof n>"u"||n===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(n=o.hooks.preprocess(n));let l=e(n,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let h=t(l,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(l){return a(l)}}},ge=new WeakSet,gn=function(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+k(n.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(n);throw n}};const P=new li;function d(s,e){return P.parse(s,e)}d.options=d.setOptions=function(s){return P.setOptions(s),d.defaults=P.defaults,rn(d.defaults),d};d.getDefaults=Qe;d.defaults=q;d.use=function(...s){return P.use(...s),d.defaults=P.defaults,rn(d.defaults),d};d.walkTokens=function(s,e){return P.walkTokens(s,e)};d.parseInline=P.parseInline;d.Parser=E;d.parser=E.parse;d.Renderer=de;d.TextRenderer=tt;d.Lexer=S;d.lexer=S.lex;d.Tokenizer=pe;d.Hooks=Q;d.parse=d;d.options;d.setOptions;d.use;d.walkTokens;d.parseInline;E.parse;S.lex;export{Mi as $,wi as A,ki as B,xi as C,vi as D,N as E,Dt as F,Ti as G,Si as H,Ai as I,Bi as J,L as K,Mt as L,Ve as M,Ft as N,bi as O,ut as P,K as Q,Ei as R,pi as S,di as T,Ss as U,as as V,or as W,nr as X,tr as Y,Xt as Z,os as _,Wi as a,T as a0,Be as a1,Ri as a2,Ii as a3,mi as a4,z as a5,Ue as a6,$e as a7,dt as a8,ji as a9,Vt as aa,Li as ab,Os as ac,Ci as ad,Oi as ae,Ni as af,rs as ag,Pi as ah,yi as ai,Xi as aj,ui as ak,Qi as al,te as b,ye as c,qi as d,Ps as e,Ot as f,Ce as g,je as h,Me as i,Ws as j,zt as k,Vi as l,Ui as m,Fe as n,gi as o,lt as p,Zi as q,$i as r,Lt as s,fi as t,zi as u,Fi as v,Hi as w,Di as x,Zs as y,_i as z};
